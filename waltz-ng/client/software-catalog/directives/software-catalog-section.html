<!--
  ~ Waltz - Enterprise Architecture
  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project
  ~ See README.md for more information
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific
  ~
  -->

<div>
    <waltz-section name="Technologies" id="technology">

        <div ng-if="ctrl.catalog.packages.length > 0">
            <waltz-section-actions>
                <input type="search" placeholder="Search"
                       style="border-radius: 6px; padding-left: 3px"
                       ng-model="ctrl.qry">
            </waltz-section-actions>

            <uib-tabset>
                <uib-tab heading="Overview">
                    <waltz-simple-software-usage-pies packages="ctrl.filteredPackages"
                                                      usages="ctrl.catalog.usages">
                    </waltz-simple-software-usage-pies>
                </uib-tab>
                <uib-tab heading="Detail">
                    <div class="waltz-scroll-region" style="height: 300px">
                        <waltz-simple-software-usage-list packages="ctrl.filteredPackages"
                                                          usages="ctrl.catalog.usages">
                        </waltz-simple-software-usage-list>
                    </div>
                </uib-tab>

            </uib-tabset>



            <div class="waltz-paragraph text-muted pull-right small">
                <waltz-icon name="info-circle"></waltz-icon>
                Associated software packages have been sourced from:
                <ul class="list-inline" style="display: inline-block">
                    <li ng-repeat="(source, usages) in ctrl.usages">
                        {{ source }}
                        <span ng-if="!$last">,</span>
                    </li>
                </ul>
            </div>

        </div>

        <waltz-no-data ng-if="ctrl.catalog.packages.length == 0 || ! ctrl.catalog">
            <message>
                <strong>No associated software packages</strong>
            </message>
        </waltz-no-data>

    </waltz-section>
</div>
