<!--
  ~ Waltz - Enterprise Architecture
  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project
  ~ See README.md for more information
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific
  ~
  -->

<div class="waltz-bulk-physical-flow-loader-wizard">
    <h4>Bulk Insert Physical Flows</h4>

    <div ng-show="$ctrl.currentStep === 1">
        <waltz-static-panels group-key="BULK-UPLOAD.PHYSICAL-FLOW"
                             render-mode="chromeless">
        </waltz-static-panels>

        <waltz-spreadsheet-loader on-spreadsheet-loaded="$ctrl.spreadsheetLoaded">
        </waltz-spreadsheet-loader>
    </div>

    <div ng-show="$ctrl.currentStep === 2">
        <waltz-column-mapper source-columns="$ctrl.sourceColumns"
                             target-columns="$ctrl.targetColumns"
                             existing-mappings="$ctrl.loadedMappings"
                             on-change="$ctrl.onMappingsChanged">
        </waltz-column-mapper>
    </div>

    <div ng-show="$ctrl.currentStep === 3">
        <waltz-bulk-physical-flow-parser column-mappings="$ctrl.columnMappings"
                                         source-data="$ctrl.sourceData"
                                         on-initialise="$ctrl.parserInitialised"
                                         on-parse-complete="$ctrl.parseComplete">
        </waltz-bulk-physical-flow-parser>
    </div>

    <div ng-show="$ctrl.currentStep === 4">
        <waltz-bulk-physical-flow-uploader flow-commands="$ctrl.uploadCmds"
                                           on-initialise="$ctrl.uploaderInitialised"
                                           on-upload-complete="$ctrl.uploadComplete">
        </waltz-bulk-physical-flow-uploader>
    </div>

    <div class="text-right">
        <br>
        <hr />

        <a class="clickable"
           ng-click="$ctrl.back()"
           ng-if="$ctrl.backVisible()">
            Back
        </a>
        <button class="btn btn-xs btn-success"
                ng-click="$ctrl.next()"
                ng-if="$ctrl.nextVisible()"
                ng-disabled="!$ctrl.canGoNext()">
            Next
        </button>
    </div>

</div>