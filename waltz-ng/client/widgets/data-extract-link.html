<!--
  ~ Waltz - Enterprise Architecture
  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project
  ~ See README.md for more information
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific
  ~
  -->

<!-- format not specified, default to CSV + XLSX -->
<div ng-if="! $ctrl.format"
     class="btn-group"
     uib-dropdown
     dropdown-append-to-body>
    <a ng-class="$ctrl.classes"
       uib-dropdown-toggle>
        <waltz-icon ng-if="! $ctrl.extracting" name="cloud-download"></waltz-icon>
        <waltz-icon ng-if="$ctrl.extracting" name="refresh" spin="true"></waltz-icon>
        <span ng-bind="$ctrl.name"></span>
        <span class="caret"></span>
    </a>
    <ul class="dropdown-menu"
        uib-dropdown-menu
        role="menu">
        <li role="menuitem">
            <a class="clickable"
               ng-click="$ctrl.exportCsv()">
                <waltz-icon name="file-text-o"></waltz-icon>
                Export as csv
            </a>
        </li>
        <li role="menuitem">
            <a class="clickable"
               ng-click="$ctrl.exportXlsx()">
                <waltz-icon name="file-excel-o"></waltz-icon>
                Export as xlsx
            </a>
        </li>
    </ul>
</div>

<!-- format specified, eg: SVG -->
<div ng-if="$ctrl.format"
     class="btn-group">
    <a ng-class="$ctrl.classes"
       ng-click="$ctrl.exportAs($ctrl.format)">
        <waltz-icon ng-if="! $ctrl.extracting" name="cloud-download"></waltz-icon>
        <waltz-icon ng-if="$ctrl.extracting" name="refresh" spin="true"></waltz-icon>
        <span ng-bind="$ctrl.name"></span>
    </a>
</div>